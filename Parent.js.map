{"version":3,"sources":["../src/Parent.ts"],"names":[],"mappings":"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","file":"Parent.js","sourceRoot":"","sourcesContent":["import { Injectable, Inject } from '@angular/core';\nimport { Headers, Http } from '@angular/http';\n\n// Need to import interfaces dependencies\n// Bug TypeScript https://github.com/Microsoft/TypeScript/issues/5938\nimport { Observable } from 'rxjs/Observable';\nimport { RequestOptionsArgs } from '@angular/http/src/interfaces';\nimport { Response } from '@angular/http/src/static_response';\n\nimport { WpApiLoader } from './Loaders';\nimport { stripTrailingSlash } from './utils';\n\nimport { AuthSession } from './AuthSession';\nimport { IParent } from './interfaces';\n\n\n\nexport class WpApiParent implements IParent {\n\n  constructor(\n    public wpApiLoader: WpApiLoader,\n    public http: Http\n  ) { }\n\n  protected getToken(): string {\n    let sessionCredentials = AuthSession.getSession();\n    return sessionCredentials ? sessionCredentials.token : null;\n  }\n\n  protected hasToken(): boolean {\n    return this.getToken() ? true : false;\n  }\n\n  protected getWebServiceUrl(postfix: string): string {\n    return this.wpApiLoader.getWebServiceUrl(postfix);\n  }\n\n  protected getDefaultOptions(\n    options: RequestOptionsArgs = { headers: new Headers() }\n  ): RequestOptionsArgs {\n    if (!options.headers) {\n      options.headers = new Headers();\n    }\n    if (!options.headers.has('Authorization') && this.hasToken()) {\n      options.headers.append('Authorization', `Bearer ${this.getToken()}`);\n    }\n    return options;\n  }\n\n  httpGet(url: string, options = {}) {\n    options = this.getDefaultOptions(options);\n    return this.http.get(this.getWebServiceUrl(url), options);\n  }\n  httpHead(url: string, options = {}) {\n    options = this.getDefaultOptions(options);\n    return this.http.head(this.getWebServiceUrl(url), options);\n  }\n  httpDelete(url: string, options = {}) {\n    options = this.getDefaultOptions(options);\n    return this.http.delete(this.getWebServiceUrl(url), options);\n  }\n  httpPost(url: string, body = {}, options = {}) {\n    options = this.getDefaultOptions(options);\n    return this.http.post(this.getWebServiceUrl(url), body, options);\n  }\n  httpPut(url: string, body = {}, options = {}) {\n    options = this.getDefaultOptions(options);\n    return this.http.put(this.getWebServiceUrl(url), body, options);\n  }\n  httpPatch(url: string, body = {}, options = {}) {\n    options = this.getDefaultOptions(options);\n    return this.http.patch(this.getWebServiceUrl(url), body, options);\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: WpApiLoader, },\n{type: Http, },\n];\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}